<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Duyá»‡t dá»¯ liá»‡u</title>
  <link rel="stylesheet" th:href="@{/css/admin.css}">
  <style>
    .tabs { display: flex; flex-wrap: wrap; gap: 6px; margin: 20px 0; }
    .tab-btn {
      padding: 8px 16px;
      background: #ecf0f1;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      flex: 1;
      min-width: 100px;
    }
    .tab-btn:hover { background: #d5dbdb; }
    .tab-btn.active { background: #3498db; color: white; }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .empty-state {
      text-align: center;
      padding: 40px;
      color: #7f8c8d;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>â³ Danh sÃ¡ch chá» duyá»‡t</h1>
  </div>

  <!-- Tab chuyá»ƒn Ä‘á»•i -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="publication">ğŸ“‘ BÃ i bÃ¡o</button>
    <button class="tab-btn" data-tab="project">ğŸ¯ Äá» tÃ i</button>
    <button class="tab-btn" data-tab="conference">ğŸ¤ Há»™i tháº£o</button>
    <button class="tab-btn" data-tab="book">ğŸ“š SÃ¡ch</button>
    <button class="tab-btn" data-tab="patent">ğŸ”¬ Báº±ng SC</button>
    <button class="tab-btn" data-tab="supervision">ğŸ“ HÆ°á»›ng dáº«n</button>
  </div>

  <!-- ThÃ´ng bÃ¡o -->
  <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

  <!-- BÃ i bÃ¡o -->
  <div class="tab-content active" id="tab-publication">
    <h3>ğŸ“‘ BÃ i bÃ¡o chá» duyá»‡t</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>TiÃªu Ä‘á»</th><th>TÃ¡c giáº£</th><th>Táº¡p chÃ­</th><th>NÄƒm</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody>
      <tr th:each="item : ${pendingPublications}">
        <td th:text="${item.pubId}"></td>
        <td th:text="${item.title}"></td>
        <td th:text="${item.authors}"></td>
        <td th:text="${item.journal}"></td>
        <td th:text="${item.year}"></td>
        <td>
          <form th:action="@{/duyet/approve/publication/{id}(id=${item.pubId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-success" onclick="return confirm('Duyá»‡t?')">âœ”ï¸ Duyá»‡t</button>
          </form>
          <form th:action="@{/duyet/reject/publication/{id}(id=${item.pubId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-red" onclick="return confirm('Tá»« chá»‘i?')">âŒ Tá»« chá»‘i</button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(pendingPublications)}">
        <td colspan="6" class="empty-state">KhÃ´ng cÃ³ bÃ i bÃ¡o nÃ o chá» duyá»‡t</td>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="tab-content" id="tab-project">
    <h3>ğŸ¯ Äá» tÃ i chá» duyá»‡t</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>TÃªn Ä‘á» tÃ i</th><th>Vai trÃ²</th><th>Thá»i gian</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody>
      <tr th:each="item : ${pendingProjects}">
        <td th:text="${item.projectId}"></td>
        <td th:text="${item.name}"></td>
        <td th:text="${item.role}"></td>
        <td th:text="${item.startDate} + ' â†’ ' + ${item.endDate}"></td>
        <td>
          <form th:action="@{/duyet/approve/project/{id}(id=${item.projectId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-success" onclick="return confirm('Duyá»‡t?')">âœ”ï¸ Duyá»‡t</button>
          </form>
          <form th:action="@{/duyet/reject/project/{id}(id=${item.projectId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-red" onclick="return confirm('Tá»« chá»‘i?')">âŒ Tá»« chá»‘i</button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(pendingProjects)}">
        <td colspan="5" class="empty-state">KhÃ´ng cÃ³ Ä‘á» tÃ i nÃ o chá» duyá»‡t</td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Há»™i tháº£o -->
  <div class="tab-content" id="tab-conference">
    <h3>ğŸ¤ Há»™i tháº£o chá» duyá»‡t</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>TiÃªu Ä‘á»</th><th>Äá»‹a Ä‘iá»ƒm</th><th>NgÃ y</th><th>Vai trÃ²</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody>
      <tr th:each="item : ${pendingConferences}">
        <td th:text="${item.confId}"></td>
        <td th:text="${item.title}"></td>
        <td th:text="${item.location}"></td>
        <td th:text="${item.date}"></td>
        <td th:text="${item.role}"></td>
        <td>
          <form th:action="@{/duyet/approve/conference/{id}(id=${item.confId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-success" onclick="return confirm('Duyá»‡t?')">âœ”ï¸ Duyá»‡t</button>
          </form>
          <form th:action="@{/duyet/reject/conference/{id}(id=${item.confId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-red" onclick="return confirm('Tá»« chá»‘i?')">âŒ Tá»« chá»‘i</button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(pendingConferences)}">
        <td colspan="6" class="empty-state">KhÃ´ng cÃ³ há»™i tháº£o nÃ o chá» duyá»‡t</td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- SÃ¡ch -->
  <div class="tab-content" id="tab-book">
    <h3>ğŸ“š SÃ¡ch chá» duyá»‡t</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>Tá»±a sÃ¡ch</th><th>NXB</th><th>NÄƒm</th><th>ISBN</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody>
      <tr th:each="item : ${pendingBooks}">
        <td th:text="${item.id}"></td>
        <td th:text="${item.title}"></td>
        <td th:text="${item.publisher}"></td>
        <td th:text="${item.year}"></td>
        <td th:text="${item.isbn}"></td>
        <td>
          <form th:action="@{/duyet/approve/book/{id}(id=${item.id})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-success" onclick="return confirm('Duyá»‡t?')">âœ”ï¸ Duyá»‡t</button>
          </form>
          <form th:action="@{/duyet/reject/book/{id}(id=${item.id})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-red" onclick="return confirm('Tá»« chá»‘i?')">âŒ Tá»« chá»‘i</button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(pendingBooks)}">
        <td colspan="6" class="empty-state">KhÃ´ng cÃ³ sÃ¡ch nÃ o chá» duyá»‡t</td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Báº±ng sÃ¡ng cháº¿ -->
  <div class="tab-content" id="tab-patent">
    <h3>ğŸ”¬ Báº±ng sÃ¡ng cháº¿ chá» duyá»‡t</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>TiÃªu Ä‘á»</th><th>Sá»‘ báº±ng</th><th>NÄƒm</th><th>Tráº¡ng thÃ¡i</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody>
      <tr th:each="item : ${pendingPatents}">
        <td th:text="${item.patentId}"></td>
        <td th:text="${item.title}"></td>
        <td th:text="${item.patentNo}"></td>
        <td th:text="${item.year}"></td>
        <td th:text="${item.status}"></td>
        <td>
          <form th:action="@{/duyet/approve/patent/{id}(id=${item.patentId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-success" onclick="return confirm('Duyá»‡t?')">âœ”ï¸ Duyá»‡t</button>
          </form>
          <form th:action="@{/duyet/reject/patent/{id}(id=${item.patentId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-red" onclick="return confirm('Tá»« chá»‘i?')">âŒ Tá»« chá»‘i</button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(pendingPatents)}">
        <td colspan="6" class="empty-state">KhÃ´ng cÃ³ báº±ng sÃ¡ng cháº¿ nÃ o chá» duyá»‡t</td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- HÆ°á»›ng dáº«n -->
  <div class="tab-content" id="tab-supervision">
    <h3>ğŸ“ HÆ°á»›ng dáº«n chá» duyá»‡t</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>Sinh viÃªn</th><th>Báº­c</th><th>Äá» tÃ i</th><th>NÄƒm</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody>
      <tr th:each="item : ${pendingSupervisions}">
        <td th:text="${item.supId}"></td>
        <td th:text="${item.studentName}"></td>
        <td th:text="${item.level}"></td>
        <td th:text="${item.thesisTitle}"></td>
        <td th:text="${item.year}"></td>
        <td>
          <form th:action="@{/duyet/approve/supervision/{id}(id=${item.supId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-success" onclick="return confirm('Duyá»‡t?')">âœ”ï¸ Duyá»‡t</button>
          </form>
          <form th:action="@{/duyet/reject/supervision/{id}(id=${item.supId})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-red" onclick="return confirm('Tá»« chá»‘i?')">âŒ Tá»« chá»‘i</button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(pendingSupervisions)}">
        <td colspan="6" class="empty-state">KhÃ´ng cÃ³ hÆ°á»›ng dáº«n nÃ o chá» duyá»‡t</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

      btn.classList.add('active');
      const tabId = 'tab-' + btn.dataset.tab;
      document.getElementById(tabId).classList.add('active');
    });
  });
</script>
</body>
</html>